<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>手动组卷 - $cfg.name</title>
    <link rel="stylesheet" href="/css/xx/my.css" />
    <link rel="stylesheet" href="/css/xx/base.min.css" />
    <link rel="stylesheet" href="/css/xx/spriter-mix.min.css" />
    <link rel="stylesheet" href="/css/xx/main.min.css" />
    <link rel="stylesheet" href="/css/xx/manual.min.css" />
    <link rel="stylesheet" href="/css/x.dialog.css" />

    <script type="text/javascript">
        window.OT2 = {}; // 全局命名空间
        OT2.AboveIE9 = true; // 默认非iE或IE9及以上
        OT2.ns = function (name) {
            var container = OT2;
            var parts = name.split('.');
            var current = '';
            if (parts[0] == 'OT2') parts.shift();
            while (current = parts.shift()) {
                if (!container[current]) container[current] = {};
                container = container[current];
            }
            return container;
        };
    </script>
    <script type="text/javascript" src="/js/xx/jquery.min.js"></script>
    <script type="text/javascript" src="/js/xx/underscore-min.js"></script>
    <script type="text/javascript" src="/js/xx/util.min.js"></script>

</head>
<body>
    <div class="head">
        <div class="head01">
            <p>新学网在线-组卷</p>
            <a href="#">个人中心</a>
        </div>
    </div>
    <div class="top-navbox">
        <div class="top-nav g-container">
            <div class="nav-items">
                <a href="javascript:;" class="item">当前：<span>$!sbname</span><i class="icona-tri2"></i></a>
                <div class="item-list">
                    <div class="list-xx">
                        <h3>小学</h3>
                        #foreach($s in $T.getSubject(1))<a href="javascript:;" data-id="$s.value">$s.name</a>#end
                    </div>
                    <div class="list-cz">
                        <h3>初中</h3>
                        #foreach($s in $T.getSubject(2))<a href="javascript:;" data-id="$s.value">$s.name</a>#end
                    </div>
                    <div class="list-gz">
                        <h3>高中</h3>
                        #foreach($s in $T.getSubject(3))<a href="javascript:;" data-id="$s.value">$s.name</a>#end
                    </div>
                </div>
            </div>
            <div class="nav-list">
                <ul>
                    <li> <a class="" href="#">首页</a> </li>
                    <li class="complex-nav-item">
                        <a href="javascript:;" class="active">手动组卷</a>
                        <div class="dd-list"> <a href="/question-1.html"><i>章节同步选题</i></a> <a href="/question-2.html"><i>知识点选题</i></a> </div>
                    </li>
                    <li class="complex-nav-item">
                        <a href="javascript:;" class="">智能组卷</a>
                        <div class="dd-list"> <a href="#"><i>章节智能组卷</i></a> <a href="#"><i>知识点智能组卷</i></a> </div>
                    </li>
                    <li> <a class="" href="http://zujuan.21cnjy.com/paper">试卷库</a> </li>
                    <li> <a class="" href="http://zujuan.21cnjy.com/subject">专题特供</a> </li>
                </ul>
            </div>
        </div>
    </div>
    <!--头部导航部分结束-->
    <!--头部结束-->
    <div class="breadcrumb g-container"> <i class="icona-dingwei"></i>当前位置： <a href="#">首页</a> <b>&gt;</b> <a href="#">$sbname</a> </div>

    #if($lt==1)
    <div class="search-type d-search-type g-container">
        <div class="type-items">
            <div class="type-tit">教材：</div>
            <div class="type-conbox">
                <div class="type-con">
                    <div class="con-items">
                        #foreach($b in $bk1)
                        <a href="question-${lt}-${b.value}.html" class="#if($b1==$b.value)type-active#end">$b.name</a>
                        #end
                    </div>
                </div>
            </div>
        </div>
        #if($bk2.count>0)
        <div class="type-items">
            <div class="type-tit">年级：</div>
            <div class="type-conbox">
                <div class="type-con">
                    <div class="con-items">
                        #foreach($b in $bk2)
                        <a href="question-${lt}-${b.value}.html" class="#if($b2==$b.value)type-active#end">$b.name</a>
                        #end
                    </div>
                </div>
            </div>
        </div>
        #end
    </div>
    #end

    #macro( getLeft $list)
    #foreach($l in $list)
    #set( $sub = $T.getLeft($l.value))
    <li class="#if($sub.Count==0)t2end#end" data-val="$l.value" data-name="#if($lt==1)cp#elseif($sub.Count()==0)kg#end">
        <div class="t2hd">
            <span></span><a href="javascript:;"><em>$l.name</em></a>
        </div>
        <ul class="t2bd">
            #getLeft($sub)
        </ul>
    </li>
    #end
    #end

    <div class="g-container f-cb">
        <div class="g-sd1">
            <div class="chapter-con f-usn" onselectstart="return false">
                <h1> 选择#if($lt==1)章节#else知识点#end </h1>
                <div id="J_Tree" class="t2-tree-smart0">
                    <div class="t2-tree">
                        #set( $list=$T.getLeft("0") )
                        #if(!$list || $list.Count()==0)
                        <p style="padding:10px;text-align:center;font-size:14px;">暂无章节信息</p>
                        #else
                        <ul class="t2bd">
                            #getLeft($list)
                        </ul>
                        #end
                    </div>
                </div>
                <script>
                    $(function () {
                        $(".t2hd span").click(function () {
                            $(this).parent('li > div').parent('li').toggleClass("t2on");
                            event.stopPropagation();
                        });
                    });
                </script>
            </div>
        </div>
        <div class="g-mn1">
            <div class="g-mn1c">
                <div class="tag-type">
                    #if($topics.count()>0)
                    <div class="tag-items">
                        <div class="tag-tit">题型：</div>
                        <div class="tag-conbox">
                            <div class="tag-con">
                                <div class="con-items">
                                    <a class="type-active" href="javascript:;" data-val="0" data-name="tp">全部</a>#foreach($t in $topics)<a href="javascript:;" data-val="$t.key" data-name="tp">$t.value</a>#end
                                </div>
                                <span class="show-more">更多<i></i></span>
                            </div>
                        </div>
                    </div>
                    #end
                    <div class="tag-items">
                        <div class="tag-tit">难易程度：</div>
                        <div class="tag-conbox">
                            <div class="tag-con">
                                <div class="con-items">
                                    <a class="type-active" href="javascript:;" data-val="0" data-name="ey">全部</a>#foreach($t in $T.GetDictList("question.easy","0"))<a href="javascript:;" data-val="$t.value" data-name="ey">$t.name</a>#end
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tag-items">
                        <div class="tag-tit">题类筛选：</div>
                        <div class="tag-conbox">
                            <div class="tag-con">
                                <div class="con-items">
                                    <a class="type-active" href="javascript:;" data-val="0" data-name="ty">全部</a>#foreach($t in $T.GetDictList("question.type","0"))<a href="javascript:;" data-val="$t.value" data-name="ty">$t.name</a>#end
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tag-items">
                        <div class="tag-tit">知识点个数：</div>
                        <div class="tag-conbox">
                            <div class="tag-con">
                                <div class="con-items">
                                    <a class="type-active" href="javascript:;" data-val="0" data-name="kgc">全部</a> <a href="javascript:;" data-val="1" data-name="kgc">1个知识点</a> <a href="javascript:;" data-val="2" data-name="kgc">2个知识点</a> <a href="javascript:;" data-val="3" data-name="kgc">多个知识点</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sort">
                    <div class="sort-left">
                        <input type="hidden" name="sortField" value="time" />
                        排序： <a href="javascript:;" id="sort-time" class="time sort-active">时间<i class="icona-sort3"></i></a> <a href="javascript:;" id="sort-count" class="count">组卷次数<i class="icona-down"></i></a>
                    </div>
                    <div class="switch-detail f-fl">
                        <span class="checkbox">
                            <i class="icona-check"></i>
                            <input type="checkbox" name="show_answer_explain" value="0" style="display:none" />
                            显示答案与解析
                        </span> （提示：点击题干可显示答案与解析）
                    </div>
                    <a class="select-btn" href="javascript:;" onclick="QList.addAllToBasket()">选择本页全部试题</a>
                    <div class="total"> 共计：<b>$count</b>题 </div>
                </div>
                <div class="search-list">
                    <ul id="J_QuestionList">
                        #foreach($q in $ques)
                        <li data-qid="$1.id">
                            <div class="search-exam">
                                <div class="exam-head">
                                    <p class="exam-head-left"> <span>题型：$q.tp</span><i class="line"></i> <span>题类：$q.ty</span><i class="line"></i> <span>难易度：$q.ey</span> </p>
                                    <p class="exam-head-right"> <span></span> </p>
                                </div>
                                <div class="exam-con">
                                    <div class="exam-q">
                                        $q.content
                                    </div>
                                </div>
                                <div class="exam-foot">
                                    <p class="exam-foot-left"> <a target="_blank" href="http://zujuan.21cnjy.com/question/detail/3356238"><i class="icona-jiexi"></i>查看解析</a> <a href="javascript:;" onclick="OT2.QCollect(this, 3356238 )"><i class="icona-shoucang"></i>收藏</a> <a href="javascript:;" onclick="new OT2.ErrorReport( 3356238 )"><i class="icona-jiucuo"></i>纠错</a> </p>
                                    <p class="exam-foot-right"> <span>组卷次数：$q.hits次</span> <a class="addbtn J_AddQuestion" href="javascript:;"><b>+</b>选题</a> </p>
                                </div>
                            </div>
                        </li>
                        #end
                    </ul>
                </div>
                <!--<div class="page">
                    <div class="pagenum">
                        <a data-page="1" href="javascript:;" class="current">1</a> <a data-page="2" href="http://zujuan.21cnjy.com/question/index?tree_type=category&chid=2&xd=3&page=2&per-page=10">2</a> <a data-page="3" href="http://zujuan.21cnjy.com/question/index?tree_type=category&chid=2&xd=3&page=3&per-page=10">3</a> <a data-page="4" href="http://zujuan.21cnjy.com/question/index?tree_type=category&chid=2&xd=3&page=4&per-page=10">4</a> <a data-page="5" href="http://zujuan.21cnjy.com/question/index?tree_type=category&chid=2&xd=3&page=5&per-page=10">5</a> <a data-page="2" href="http://zujuan.21cnjy.com/question/index?tree_type=category&chid=2&xd=3&page=2&per-page=10">下一页</a>
                        <a id="paper-jump" data-page="1" class="current" href="http://zujuan.21cnjy.com/question/index?tree_type=category&chid=2&xd=3&page=1&per-page=10">跳转</a>
                        <script>
                            function toPaperNum(ob) {
                                var aJump = $('#paper-jump');
                                var value = $(ob).val();
                                var href = aJump.attr('href');
                                href = href.replace(/([\&\?]page=)[0-9]*/, '$1' + value);
                                aJump.data({'page': value});
                                aJump.attr({'href': href});
                            }
                        </script>
                    </div>
                </div>-->

                <div class="null-page" style="width:100%;text-align: center;color:#333;font-size: 14px;margin-top: 80px; #if($ques.Count()>0)display:none#end">
                    <img src="/img/xx/blank.png" /><br />
                    <br />
                    <span style="font-size: 16px; color: #666666; font-family:Microsoft YaHei">未搜索到相关数据!</span>
                </div>

            </div>
        </div>
    </div>

    <!--试题篮-->

    <div class="basket" id="J_Basket">
        <div class="basket-tit">
            <p><i class="icona-gouwulan"></i><em>试题篮</em></p>
            <span><i class="icona-gouwuleft"></i></span>
        </div>
        <div class="basket-con">
            <div class="basket-count01">
                <div class="basket-head"> 共计：（<span>0</span>）道题 </div>
                <div class="baskrt-list"> </div>
            </div>
            <div class="basket-foot"> <a id="to-paper-admin-edit" data-method="post" class="basket-btn" href="http://zujuan.21cnjy.com/paper/admin-edit" style="display: none">编辑</a> <a id="to-paper-edit" data-method="post" class="basket-btn" href="http://zujuan.21cnjy.com/paper/edit" style="">生成试卷</a> <a id="to-paper-admin-cancel" class="basket-btn" href="http://zujuan.21cnjy.com/question" style="display: none">取消</a> </div>
        </div>
    </div>

    <!--<script>
        $(function () {
            var cachePaper = null;
            try {
                cachePaper = JSON3.parse(OT2.LocalData.get('basket_cachePid'));
            }
            catch (e) {

            }
            var admin_url = '/paper/admin-edit';
            if (cachePaper) {
                var pid = cachePaper.pid;
                admin_url += '?pid=' + pid + '&clean=0';
                $('#to-paper-admin-edit').show().attr({ href: admin_url });
                $('#to-paper-admin-cancel').show().click(function () {

                    OT2.LocalData.remove(cachePaper.paper_key);
                    OT2.LocalData.remove('basket_cacheObj');
                    OT2.LocalData.remove('basket_cachePid');
                });
                $('.basket-tit').css({ background: '#ffb03d none repeat scroll 0 0' });
            } else {
                $('#to-paper-edit').show();
            }

            $(".basket-foot a[data-method='post']").click(function () {
                if (typeof USER.uid === 'undefined') {
                    OT2.Global.initLogin();
                    return false;
                }
                var cacheObj = {};
                try {
                    cacheObj = JSON3.parse(OT2.LocalData.get('basket_cacheObj')) || {};
                }
                catch (e) {

                }
                var qids = [];
                _.each(cacheObj, function (v) {
                    if (v.xd == OT2.xd_chid.xd && v.xk == OT2.xd_chid.chid) {
                        qids.push(v.id);
                    }
                });
                if (typeof USER.basketLimit === 'undefined') USER.basketLimit = 30; // 未登录默认三十条
                var len = qids.length;
                if (len == 0) {
                    OT2.Util.alert('试题篮是空的，请添加试题！');
                    return false;
                }
                if (len > USER.basketLimit) {
                    OT2.Util.alert('试题篮试题数量超过限制');
                    return false;
                }
                $(this).attr({
                    'data-params': JSON3.stringify({
                        'qids': qids
                    })
                });

                return true;
            });
        })

    </script>-->

    <div style="position: absolute;" class="" id="div_move">
        <li data-qid="3356238">
            <div class="search-exam">
                <div class="exam-head">
                    <p class="exam-head-left"> <span>题型：单选题</span><i class="line"></i> <span>题类：模拟题</span><i class="line"></i> <span>难易度：普通</span> </p>
                    <p class="exam-head-right"> <span></span> </p>
                </div>
                <div class="exam-con">
                    <div class="exam-q">
                        <p>qwerqwerq</p>
                    </div>
                </div>
                <div class="exam-foot">
                    <p class="exam-foot-left"> <a target="_blank" href="http://zujuan.21cnjy.com/question/detail/3356238"><i class="icona-jiexi"></i>查看解析</a> <a href="javascript:;" onclick="OT2.QCollect(this, 3356238 )"><i class="icona-shoucang"></i>收藏</a> <a href="javascript:;" onclick="new OT2.ErrorReport( 3356238 )"><i class="icona-jiucuo"></i>纠错</a> </p>
                    <p class="exam-foot-right"> <span>组卷次数：0次</span> <a class="addbtn J_AddQuestion" href="javascript:;"><b>+</b>选题</a> </p>
                </div>
            </div>
        </li>
    </div>

    <script src="/js/xx/global.min.js"></script>
    <script src="/js/x.js"></script>

    <script type="text/javascript">
        window.OT2 = {}; // 全局命名空间
        //$('.switch-detail').find('.checkbox').on('click', function () {
        //    var checkedbox = $(this).find('input[type=checkbox]').first();
        //    var checked = $checkedbox.prop('checked');
        //    checkedbox.prop('checked', !checked);
        //    $(this)[checked ? 'removeClass' : 'addClass']('checked');
        //    QList.basket.publish('show-analyticbox', !checked);
        //});

        $("[data-val]").click(function () {
            var ob = $(this);
            if (!ob.attr("data-name")) return;
            if (!ob.hasClass('type-active')) {
                ob.parent().find('.type-active').removeClass('type-active');
                ob.addClass('type-active');
            }
            var d = { page: 1 };
            d[ob.attr("data-name").trim()] = ob.attr("data-val");
            loadsearch(d);
            event.stopPropagation();
        });

        $(".item-list a").click(function () {
            x.cookie.set("xx.sub", $(this).attr("data-id"));
            document.location.href = "/question-$!{lt}.html";
        });

        var data = {
            sub: "$!sb",
            page: 2,
            limit: 10,
            kg: 0,
            cp: 0,
            tp: 0,
            ey: 0,
            ty: 0,
            kgc: 0
        }

        function loadsearch(d) {
            data = jQuery.extend(data, d);
            x.doapi("question.search", data, function (d) {
                if (!d.issucc) return;
                var cot = $("#J_QuestionList");
                if (d.items.length == 0) { cot.hide(); $(".null-page").show(); return; }
                cot.show();
                $(".null-page").hide();
                if (data.page == 1) cot.empty();

                for (var i in d.items) {
                    var r = d.items[i];
                    var html = '<li data-qid="' + r.id + '"><div class="search-exam"><div class="exam-head"><p class="exam-head-left"> <span>题型：' + r.tp + '</span><i class="line"></i> <span>题类：' + r.ty + '</span><i class="line"></i> <span>难易度：' + r.ey + '</span> </p><p class="exam-head-right"> <span></span> </p></div><div class="exam-con"><div class="exam-q">' + r.content + '</div></div><div class="exam-foot"><p class="exam-foot-left"> <a target="_blank" href="http://zujuan.21cnjy.com/question/detail/3356238"><i class="icona-jiexi"></i>查看解析</a> <a href="javascript:;" onclick="OT2.QCollect(this, 3356238 )"><i class="icona-shoucang"></i>收藏</a> <a href="javascript:;" onclick="new OT2.ErrorReport( 3356238 )"><i class="icona-jiucuo"></i>纠错</a> </p><p class="exam-foot-right"> <span>组卷次数：' + r.hits + '次</span> <a class="addbtn J_AddQuestion" href="javascript:;"><b>+</b>选题</a> </p></div></div></li>';
                    cot.append(html);
                }
            });
        }

    </script>
    <a class="return" href="javascript:;" style="right: 4.5px; display: none;"><i class="icona-top"></i></a>
</body>
</html>
